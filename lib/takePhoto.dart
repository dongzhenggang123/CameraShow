import 'package:flutter/material.dart';import 'package:camera/camera.dart';import 'package:flutter_camera/ciclePainter.dart';class TakePhoto extends StatefulWidget {  const TakePhoto({Key? key}) : super(key: key);  @override  _TakePhotoState createState() => _TakePhotoState();}class _TakePhotoState extends State<TakePhoto> {  late List<CameraDescription> cameras;  late CameraController controller;  bool initialState = false;  @override  void initState() {    // TODO: implement initState    super.initState();    initCamera();  }  @override  void dispose() {    // TODO: implement dispose    controller.dispose();    super.dispose();  }  @override  Widget build(BuildContext context) {    final size = MediaQuery.of(context).size;    final width = size.width;    final top = width*2/3 - width/2;    final bottom = width*4/3 - width/2;    return Material(      color: Colors.white,      child:  Stack(        children: [          Column(            children: [              SafeArea(child: Align(                alignment: Alignment(0.9, 0),                child: IconButton(                  icon: Icon(Icons.clear_outlined, color: Colors.blue,),                  onPressed: ()=> Navigator.pop(context),                ),              ), top: true,),              Container(                // color: Colors.red,                height: width,                width: size.width,                child: Stack(                  children: [                    Container(                      padding: EdgeInsets.symmetric(horizontal: 0.125*width),                      height: width,                      child: initialState ?                      CameraPreview(controller) : const SizedBox.expand(),                    ),                    Container(                      padding: EdgeInsets.symmetric(horizontal: 0.125*width),                      height: width,                      child: CustomPaint(                        size: Size(width*0.75, width),                        painter: CiclePainter(),                      ),                    ),                  ],                ),              ),              Center(                child: Text('请保持头像在圆圈内', textAlign: TextAlign.center,style: TextStyle(color: Colors.grey, fontSize: 18, fontWeight: FontWeight.w500)),              ),              SafeArea(child: SizedBox(), bottom: false,)            ],          ),        ],      ),    );  }  ///初始化相机  Future<void> initCamera() async {    print('开始初始化');    cameras = await availableCameras();    var des;    for(CameraDescription m in cameras) {      if(m.lensDirection == CameraLensDirection.front) {        des = m;        break;      }    }    controller = CameraController(des, ResolutionPreset.medium);    controller.initialize().then((value) {      initialState = true;      print('${1/controller.value.aspectRatio}');      setState(() {      });    });  }}